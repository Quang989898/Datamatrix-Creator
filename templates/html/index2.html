<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
    <!-- site metas -->
    <title>Datamatrix Creator</title>
    <link rel="icon" type="image/x-icon" href="/static/images/abc.ico" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/camera.css">
    <!-- bootstrap css -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" />
    <!-- style css -->
    <link rel="stylesheet" href="/static/css/style.css" />

    <!-- Responsive-->
    <link rel="stylesheet" href="/static/css/responsive.css" />
    <!-- fevicon -->
    <link rel="icon" href="/static/images/fevicon.png" type="image/gif" />
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="/static/css/jquery.mCustomScrollbar.min.css" />
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
      media="screen"
    />
    <link rel="stylesheet" href="/static/css/vcast.css" />
    <script src="/static/js/html5-qrcode.min.js"></script>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script
    ><![endif]-->
  </head>
  <!-- body -->
  <body class="main-layout">
    <!-- loader  -->
    <!-- <div class="loader_bg">
         <div class="loader"><img src="/static/images/loading.gif" alt="#" /></div>
      </div> -->
    <header>
      <!-- header inner -->
      <div class="header">
        <div class="container">
          <div class="row">
            <div class="col-md-4 col-sm-4">
              <div class="logo">
                <a href="#"><img src="/static/images/abc.ico" style="width: 100px; height: 100px" alt="#" /></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <!-- end header inner -->
    <!-- end header -->
    <!-- banner -->

    <section class="banner_main">

      <div id="banner1" class="carousel slide banner_slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#banner1" data-slide-to="0" class="active"></li>
          <li data-target="#banner1" data-slide-to="1"></li>
          <li data-target="#banner1" data-slide-to="2"></li>
        </ol>
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="container">
              <div class="carousel-caption">
                <div class="row">
                  <div class="col-md-7 col-lg-5">
                    <div class="text-bg">
                      <h1>DMC Create Website</h1>
                      <span>Website for customer creating new DMC for error DMC pcs</span>

                    </div>
                  </div>
                  <section>
                  <div class="container mt-5">
                    <div class="display-cover">
                      <video autoplay></video>
                      <canvas class="d-none"></canvas>
                      <img class="screenshot-image d-none" alt="">
                  
                      <div class="controls">
                          <button class="btn btn-outline-success screenshot" id="screenshot" title="ScreenShot"><i data-feather="image"></i></button>
                      </div>
                      <div class="center-dmc">
                        <canvas id="myCanvas" width="130" height="130" style="border:1px solid #d3d3d3;"></canvas>
                      </div>
                  </div>
                  </div>
                </section>
                  <div class="col-md-12 col-lg-7">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="ban_track">
                          <figure><img src="/static/images/dmc.png" alt="#" /></figure>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div>
                          <div class="col-md-12">
                            <h3>Product Name</h3>
                          </div>
                          <div class="col-md-12">
                            <select class="transfot_form" style="width: 234px" id="ProductName" name="ProductName">
                              <option value="A2012003VC">A2012003VC</option>
                              <option value="A2012003TQ">A2012003TQ</option>
                              <option value="A2012004">A2012004</option>
                              <option value="A2107024">A2107024</option>
                            </select>
                          </div>
                          <div class="col-md-12">
                            <span class="popuptext" style="visibility: hidden" id="myPopup"></span>
                            <input
                              id="Castingcode"
                              oninput="closepopup()"
                              class="transfot_form"
                              placeholder="Casting Code"
                              type="text"
                              name="Castingcode"
                            />
                          </div>
                          <div class="col-md-12">
                            <button class="get_now" onclick="loadDoc()">Create DMC</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- end banner -->
    <!-- main -->

    <!-- end main -->
    <!--  footer -->
    <footer>

      <div class="footer bottom_cross1">
        <a class="contact-us" href="mailto: finepro@vcast.com.vn">Contact Us</a>
        <div class="container">
          <div class="row">
            <div class="col-md-6">
              <ul class="location_icon">
                <li>
                  <a href="#"><i class="fa fa-map-marker" aria-hidden="true"></i></a> Address : No. 2A, Street 55,
                  Quarter 2, Phu Tan Ward, TDM City, Binh Duong Province, Vietnam.
                </li>
                <li>
                  <a href="#"><i class="fa fa-phone" aria-hidden="true"></i></a>Phone : +(84) 847 959 999
                </li>
                <li>
                  <a href="#"><i class="fa fa-envelope" aria-hidden="true"></i></a
                  ><a
                    style="font-size: 21px; color: #353535; line-height: 30px; padding-right: 0px; float: left"
                    href="mailto: finepro@vcast.com.vn"
                    >Email : Finepro@vcast.com.vn</a
                  >
                </li>
              </ul>
            </div>
            <div class="col-md-6">
              <div class="map">
                <figure><img src="/static/images/map.png" alt="#" /></figure>
              </div>
            </div>
          </div>
          
        </div>
        <div class="copyright">
          <div class="container">
            <div class="row">
              <div class="col-md-12">
                <p>Â© 2022 Finepro Automation</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!-- end footer -->
    <!-- Javascript files-->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/popper.min.js"></script>
    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/jquery-3.0.0.min.js"></script>
    <!-- sidebar -->
    <script src="/static/js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="/static/js/custom.js"></script>
    <script>
      function closepopup() {
        var popup = document.getElementById("myPopup");
        popup.style.visibility = "hidden";
      }
    </script>
    <script>
      function loadDoc() {
        const xhttp1 = new XMLHttpRequest();
        var casting = document.getElementById("Castingcode").value;
        var ProductName = document.getElementById("ProductName").value;
        xhttp1.onload = function () {
          if (this.responseText.length < 40) {
            var popup = document.getElementById("myPopup");
            popup.style.visibility = "visible";
            popup.innerHTML = this.responseText;
          } else {
            var a = window.open("", "", "");
            console.log("<img src='data:image/png;base64," + this.responseText + "'>");
            a.document.write(
              "<img style='width:46px;height:46px;' src='data:image/png;base64," + this.responseText + "'>"
            );
            a.document.close();
            setTimeout(function () {
              a.print();
            }, 10);
          }
        };
        xhttp1.open("POST", "/createdmc");
        xhttp1.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xhttp1.send("casting=" + casting + "&product=" + ProductName);
      }
      document.getElementById("Castingcode").addEventListener("keypress", function (event) {
        // If the user presses the "Enter" key on the keyboard
        if (event.key === "Enter") {
          event.preventDefault();
          loadDoc();
        }
      });
      // QR
      function onScanSuccess(qrCodeMessage) {
        document.getElementById("result").innerHTML = '<span class="result">' + qrCodeMessage + "</span>";
        if (qrCodeMessage.length==29){
          const xhttp1 = new XMLHttpRequest();
          xhttp1.onload = function () {
            var a = window.open("", "", "");
            a.document.write(
              "<img style='width:46px;height:46px;' src='data:image/png;base64," + this.responseText + "'>"
            );
            a.document.close();
            setTimeout(function () {
              a.print();
            }, 10);
          };
          xhttp1.open("POST", "/printdmc");
          xhttp1.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
          xhttp1.send("dmc=" + qrCodeMessage);
        }
      }

      function onScanError(errorMessage) {
        a.document.write("abc");
        a.document.close();
        setTimeout(function () {
          a.print();
        }, 1000);
      }

      var html5QrcodeScanner = new Html5QrcodeScanner("reader", { fps: 10, qrbox: 120 });
      html5QrcodeScanner.render(onScanSuccess, onScanError);
    </script>
    <script>
      var c = document.getElementById("myCanvas");
      var ctx = c.getContext("2d");
      
      // Red rectangle
      ctx.beginPath();
      ctx.lineWidth = "6";
      ctx.strokeStyle = "white";
      ctx.rect(0, 0, 130, 130);  
      ctx.stroke();
    </script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="/static/js/camera.js"></script>
  </body>
</html>
